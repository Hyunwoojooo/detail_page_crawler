Metadata-Version: 2.4
Name: seed-collector
Version: 0.1.0
Summary: Seed URL collector for e-commerce category pages
Author: Prompt Shopping
License: MIT
Requires-Python: >=3.9
Description-Content-Type: text/markdown
Requires-Dist: httpx>=0.27.0
Requires-Dist: pydantic>=2.6.0
Requires-Dist: beautifulsoup4>=4.12.0
Provides-Extra: test
Requires-Dist: pytest>=8.0.0; extra == "test"
Dynamic: requires-python

# seed-collector

Production-friendly CLI tool to collect canonical product detail URLs from e-commerce category pages.

## Install

```bash
cd seed_collector
python -m venv .venv
source .venv/bin/activate
pip install -e .
```

For tests:

```bash
pip install -e ".[test]"
```

## Usage

Basic run:

```bash
seed-collector collect \
  --category-url "https://example.com/product/list.html?cate_no=123" \
  --out-dir ./out
```

Multiple categories + custom limits:

```bash
seed-collector collect \
  --category-url "https://example.com/product/list.html?cate_no=123" \
  --category-url "https://example.com/product/list.html?cate_no=456" \
  --out-dir ./out \
  --max-pages-per-category 30 \
  --max-products 2000 \
  --rate-limit-rps 1.5 \
  --concurrency 6 \
  --timeout-sec 15 \
  --retry-count 3 \
  --paging-mode auto
```

### Covernat example

```bash
seed-collector collect \
  --category-url "https://covernat.co.kr/product/list-woman.html?cate_no=2074" \
  --out-dir ./out \
  --paging-mode page_param \
  --page-param page
```

## Output

Files are written to `--out-dir`:

- `detail_urls.jsonl` (required)
- `seed_failures.jsonl` (recommended)
- `seed_manifest.json` (recommended)

Example `detail_urls.jsonl` line:

```json
{"seed_run_id":"2f6b6b8f-16a5-4578-b602-3d4b0be38ea7","shop_base_url":"https://shop.example.com","platform_hint":"cafe24","category_url":"https://shop.example.com/product/list.html?cate_no=123","list_page_url":"https://shop.example.com/product/list.html?cate_no=123&page=1","discovery_method":"category_list","discovered_at":"2026-01-05T01:23:45.678901+00:00","detail_url":"https://shop.example.com/product/detail.html?product_no=12345&cate_no=123","canonical_url":"https://shop.example.com/product/detail.html?product_no=12345","external_product_id":"12345","anchor_text":"Sample Tee","http_status":200,"notes":[]}
```

Example `seed_failures.jsonl` line:

```json
{"seed_run_id":"2f6b6b8f-16a5-4578-b602-3d4b0be38ea7","category_url":"https://shop.example.com/product/list.html?cate_no=123","list_page_url":"https://shop.example.com/product/list.html?cate_no=123&page=2","failure_category":"HTTP_BLOCKED_403_429","message":"HTTP 403","status_code":403,"created_at":"2026-01-05T01:23:50.123456+00:00"}
```

Example `seed_manifest.json`:

```json
{
  "seed_run_id": "2f6b6b8f-16a5-4578-b602-3d4b0be38ea7",
  "started_at": "2026-01-05T01:23:40.000000+00:00",
  "finished_at": "2026-01-05T01:24:10.000000+00:00",
  "input_category_urls": [
    "https://shop.example.com/product/list.html?cate_no=123"
  ],
  "total_list_pages_fetched": 12,
  "total_detail_urls": 420,
  "total_canonical_urls": 390,
  "failures_count": 1,
  "output_paths": {
    "detail_urls": "./out/detail_urls.jsonl",
    "seed_failures": "./out/seed_failures.jsonl",
    "seed_manifest": "./out/seed_manifest.json"
  }
}
```

## Tests

```bash
pytest
```
